<!DOCTYPE html>
<html lang="en">

<head>

  <!-- Basic Page Needs
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta charset="utf-8">
  <title>xserver.js: JavaScript APIs for PTV xServer</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Mobile Specific Metas
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link href='https://fonts.googleapis.com/css?family=Raleway:400,300,600' rel='stylesheet' type='text/css'>

  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="stylesheet" href="css/custom.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.2/leaflet.css" />

  <!-- Scripts
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <link rel="icon" type="image/x-icon" href="images/favicon.ico">

</head>

<body>
  <!--			<iframe height="300" width="100%" src="bg.html" allowfullscreen></iframe> -->

  <!-- Primary Page Layout
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->

  <div style="z-index:10000" id="map" class="section hero">
<div style="z-index:10000" class="container">
<div class="row">
  <div class="four columns">
    <h4 class="hero-heading">xserver.js: JavaScript APIs for PTV xServer</h4>
    <a class="button button-primary" href="https://github.com/ptv-logistics/xserverjs">Fork me on GitHub</a>
  </div>
  <div class="eight columns phones">
    <img class="phone" src="images/PTV_Group_Vision_EN_4C.png">
  </div>
</div>
</div>
</div>

<div class="section">
  <div class="container">
    <h3 class="section-heading">Use PTV xServer with your favourite map widget</h3>
    <p class="section-description">The xMapServer tile api lets you add an xServer map to virtually every existing map widget. Templates for the most common
      widgets show how to initialize them for optimal performance on both cloud and on-premise.</p>
    <div class="row">
      <div class="one-half column value">
        <h4 class="hero-heading">Leaflet</h4>
        <iframe height="300" width="100%" src="./boilerplate/Leaflet.0.7.html" allowfullscreen></iframe>
      </div>
      <div class="one-half column value">
        <h4 class="hero-heading">Cesium</h4>
        <iframe height="300" width="100%" src="./boilerplate/cesium.html" allowfullscreen></iframe>
      </div>
    </div>
    <div class="row">
      <div class="one-half column value-heading">
        <h4 class="hero-heading">OpenLayers V2</h4>
        <iframe height="300" width="100%" src="./boilerplate/OpenLayers2.html" allowfullscreen></iframe>
      </div>
      <div class="one-half column value">
        <h4 class="hero-heading">OpenLayers V3</h4>
        <iframe height="300" width="100%" src="./boilerplate/OpenLayers3.html" allowfullscreen></iframe>
      </div>
    </div>
  </div>
</div>

<div class="section">
  <div class="container">
    <h3 class="section-heading">leaflet-xserver</h3>
    <p class="section-description">leaflet-xserver is an extension for Leaflet to display extended Map content. Specific layer classes let you add styleable
      and clickable Feature-Layers. You can add the extension to your Leaflet project with <code>npm install leaflet-xserver</code>.</p>
    <div class="row">
      <iframe height="450" width="100%" src="./boilerplate/Leaflet-Clickable-Layered.html" allowfullscreen></iframe>
    </div>
  </div>
</div>

<div class="section">
  <h3 class="section-heading">Premium code samples</h3>
  <p class="section-description">Use our pre-fabricated reference implementations to jump-start your application.</p>
  <div class="container">
    <h5 class="section-heading">Leaflet-Routing-Machine</h5>
      <p class="section-description">Build an interactive route planner with xMap-, xRoute- and xLocate-server.</p>
      <div class="row">
        <iframe height="500" width="100%" src="./premium-samples/lrm-xserver/index.html" allowfullscreen></iframe>
      </div>

  </div>
</div>

<div class="section">
  <div class="container">
    <h5 class="section-heading">POI Locator</h5>
      <p class="section-description">Display and search your locations with PTV xServer.</p>
      <div class="row">
        <iframe height="500" width="100%" src="./premium-samples/poi-locator/index.html" allowfullscreen></iframe>
      </div>
  </div>
</div>

<div class="section">
  <div class="container">
    <h5 class="section-heading">Administrative Regions</h5>
      <p class="section-description">Add new data and functions to the map.</p>
      <div class="row">
        <iframe height="500" width="100%" src="./premium-samples/admin-regions/index.html" allowfullscreen></iframe>
      </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.2/leaflet-src.js"></script>
<script src="token.js"></script>
<script>

  var map = L.map('map', {
    zoomSnap: 0.5,
    zoomDelta: 0.25,
    wheelPxPerZoomLevel: 100,
    zoomControl: false,
    attributionControl: false
  }
  ).setView([0, 0], 2);

  var getLayer = function (profile) {
    return L.tileLayer('https://s0{s}-xserver2-dev.cloud.ptvgroup.com/services/rest/XMap/tile/{z}/{x}/{y}/' + profile +
      '?xtok=' + token, {
        attribution: '<a href="http://www.ptvgroup.com">PTV</a>, TOMTOM',
        maxZoom: 22,
        subdomains: '1234'
      });
  }

  getLayer('gravelpit-labels').addTo(map);


  map._handlers.forEach(function (handler) {
    handler.disable();

  })

  var positions = [
    [49.01405, 8.4044, 16, 25], // KQ
    [48.856667, 2.351667, 12, 25], // Paris
    [51.50939, -0.11832, 12, 15], // Lonodn
    [40.712778, -74.005833, 15, 25], // NY
    [-35.3075, 149.124417, 14, 35]]; // Canberra

  var filter = "blur(7px)";

  var i = 0;
  var p = positions[i];

  map.getPanes().tilePane.style.webkitFilter = filter;
  map.getPanes().tilePane.style.filter = filter;

  window.setTimeout(function () {
    map.flyTo([p[0], p[1]], p[2], { duration: p[3] });

    map.on('moveend', function (e) {
      this.i = ++this.i % positions.length;
      var p = positions[i];

      map.flyTo([p[0], p[1]], p[2], { duration: p[3] });
    }, this);
  }, 2000);
</script>
<!-- End Document
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
</body>

</html>
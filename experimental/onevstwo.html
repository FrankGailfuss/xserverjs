<!DOCTYPE html>
<html>

<head>
    <title>xsone vs xstwo</title>
    <meta charset="utf-8" />

    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.2/leaflet.css" />
    <style>
        body {
            padding: 0;
            margin: 0;
        }
        
        html,
        body,
        #map {
            height: 100%;
        }
        
        #map {
            position: absolute;
            left: 0px;
            right: 0px;
            top: 0px;
            bottom: 0px;
        }
        
        #range {
            top: 10px;
            left: 0px;
            right: 0px;
            width: 100%;
            position: absolute;
            z-Index: 100000;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <input id="range" type="range" min="0" max="1.0" step="any" />
    <input id="range2" type="range" value="0.15" min="0" max="1.0" step="any" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.0.2/leaflet.js"></script>
    <script src="./leaflet-xserver/NonTiledLayer.js"></script>
    <script src="./leaflet-xserver/NonTiledLayer.WMS.js"></script>
    <script src="token.js"></script>
    <script>
        var map = L.map('map', {
		     zoomControl: false,
            // zoomSnap: 0.125,
            // zoomDelta: 0.5,
            // wheelPxPerZoomLevel: 100
        }).setView([49.01405, 8.4044], 14);

        new L.Control.Zoom({
            position: 'bottomleft'
        }).addTo(map);

        var attribution = '<a target="_blank" href="http://www.ptvgroup.com">PTV</a>, TOMTOM';

        var x2two = L.tileLayer('https://s0{s}-xserver2-europe-test.cloud.ptvgroup.com/services/rest/XMap/tile/{z}/{x}/{y}/silkysand' +
            '?xtok=' + token, {
                attribution: '<a target="_blank" href="http://www.ptvgroup.com">PTV</a>, TOMTOM',
                maxZoom: 19,
                subdomains: '1234'
            }).addTo(map);


        var xs1background = L.tileLayer('https://api{s}-test.cloud.ptvgroup.com/WMS/GetTile/xmap-silkysand-bg/{x}/{y}/{z}.png', {
            minZoom: 0,
            maxZoom: 19,
            opacity: 1.0,
            attribution: attribution,
            subdomains: '1234'
        }).addTo(map);

        var xs1foreground = new L.NonTiledLayer.WMS('https://api-test.cloud.ptvgroup.com/WMS/WMS?xtok=' + token, {
            minZoom: 0,
            maxZoom: 19,
            opacity: 1.0,
            layers: 'xmap-silkysand-fg',
            format: 'image/png',
            transparent: true,
            attribution: attribution,
            pane: 'tilePane',
            zIndex: 1000
        }).addTo(map);



        // set up range splitter
        var range = document.getElementById('range');
        clip();

        function clip() {
            var nw = map.containerPointToLayerPoint([0, 0]),
                se = map.containerPointToLayerPoint(map.getSize()),
                clipX = nw.x + (se.x - nw.x) * range.value;

            xs1background.getContainer().style.clip = 'rect(' + [nw.y, clipX, se.y, nw.x].join('px,') + 'px)';
            xs1foreground._div.style.clip = 'rect(' + [nw.y, clipX, se.y, nw.x].join('px,') + 'px)';
            x2two.getContainer().style.clip = 'rect(' + [nw.y, se.x, se.y, clipX].join('px,') + 'px)';
        }

        range.onchange = clip;
        range.oninput = clip;
        map.on('move', clip);
    </script>
</body>

</html>